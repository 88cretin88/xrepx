<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
  "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../general.ent">
  %general-entities;
]>

<sect1 id="ch-partitioning-aboutlfs">
  <?dbhtml filename="aboutlfs.html"?>

  <title>Настройка переменной окружения $LFS</title>

  <para>Во многих главах и разделах книги присутствует переменная окружения <envar>LFS</envar>. До выполнения процесса сборки,  необходимо убедиться в том, что переменная определена. Переменная должна хранить путь до каталога, где будет выполняться процесс сборки LFS системы. Например, мы будем использовать каталог - <filename class="directory">/mnt/lfs</filename>. Несомненно, вы можете изменить путь на ваше усмотрение. Если сборка выполняется на отдельном разделе, каталог может быть точкой монтирования раздела. Определите каталог, где будет храниться система LFS и выполните следующую команду:</para>

<screen role="nodump"><userinput>export LFS=<replaceable>/mnt/lfs</replaceable></userinput></screen>

  <para>Имея такую переменную, будет очень удобно выполнять команды, например <command>mkdir -v $LFS/tools</command>
  можно набирать буквально. Командная оболочка автоматически заменит символы <quote>$LFS</quote> в <quote>/mnt/lfs</quote> (или иным значением, которые вы присвоили этой переменной) во время обработки команды.</para>

  <caution>
  <para>Не забудьте проверить что переменная <envar>LFS</envar> устанавливается каждый раз, когда выходите и заново заходите в рабочую оболочку (например, при выполнении команды <command>su</command> в <systemitem class="username">root</systemitem> или другого пользователя). Проверьте что переменная установлена правильно. Введите команду чтобы в этом убедиться:</para>

<screen role="nodump"><userinput>echo $LFS</userinput></screen>

  <para>Убедитесь что вывод отображает путь к тому каталогу, где будет выполнена сборка системы LFS (<filename class="directory">/mnt/lfs</filename>). Если вывод неправильный, используйте команду которая обсуждалась выше, для
  установки переменной LFS требуемого значения пути к системе LFS.</para>
  </caution>

  <note><para>
  Ещё один способ удостовериться что значение переменной корректное - указать ее значение в файле <filename>.bash_profile</filename> в домашнем каталоге и в каталоге <filename>/root/.bash_profile</filename>. Кроме того, оболочка, которая указанна в файле <filename>/etc/passwd</filename> для всех пользователей, которым необходимо наличие переменной <envar>LFS</envar> нужна bash для гарантии того, что файл <filename>/root/.bash_profile</filename> используется процессом авторизации в систему.</para>

  <para>Есть ещё один метод который используется при входе в хост-систему. Если при входе в хост-систему используется графический менеджер, пользовательский файл <filename>.bash_profile</filename> не будет корректно использоваться при запуске виртуального терминала. В этом случае, необходимо добавить команду export в файл <filename>.bashrc</filename>
  для необходимого пользователя а также для пользователя root. К тому же некоторые дистрибутивы имеют инструкции не запускать файл <filename>.bashrc</filename>  в не интерактивном вызове bash. Обязательно добавьте export перед тем, как
  проверить работу в не интерактивном режиме.</para>

  </note>

</sect1>
